From c759da50c2e67246ea586219fc2ab088366efd53 Mon Sep 17 00:00:00 2001
From: Chris Rummel <crummel@microsoft.com>
Date: Tue, 10 Sep 2019 17:16:25 -0500
Subject: [PATCH 11/11] Shotgun debugging

---
 .../Server/ref/Microsoft.AspNetCore.Components.Server.csproj  | 4 +++-
 .../src/DependencyInjection/ConfigureStaticFilesOptions.cs    | 2 +-
 .../Server/src/Microsoft.AspNetCore.Components.Server.csproj  | 2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/Components/Server/ref/Microsoft.AspNetCore.Components.Server.csproj b/src/Components/Server/ref/Microsoft.AspNetCore.Components.Server.csproj
index 21f0c740e5..1f6b464270 100644
--- a/src/Components/Server/ref/Microsoft.AspNetCore.Components.Server.csproj
+++ b/src/Components/Server/ref/Microsoft.AspNetCore.Components.Server.csproj
@@ -3,6 +3,9 @@
   <PropertyGroup>
     <TargetFrameworks>netcoreapp3.0</TargetFrameworks>
   </PropertyGroup>
+  <ItemGroup>
+    <Reference Include="Microsoft.Extensions.FileProviders.Embedded" />
+  </ItemGroup>
   <ItemGroup Condition="'$(TargetFramework)' == 'netcoreapp3.0'">
     <Compile Include="Microsoft.AspNetCore.Components.Server.netcoreapp3.0.cs" />
     <Reference Include="Microsoft.AspNetCore.Components.Authorization"  />
@@ -12,7 +15,6 @@
     <Reference Include="Microsoft.AspNetCore.StaticFiles"  />
     <Reference Include="Microsoft.Extensions.Caching.Memory"  />
     <Reference Include="Microsoft.Extensions.FileProviders.Composite"  />
-    <Reference Include="Microsoft.Extensions.FileProviders.Embedded"  />
     <Reference Include="Microsoft.Extensions.Logging"  />
   </ItemGroup>
 </Project>
diff --git a/src/Components/Server/src/DependencyInjection/ConfigureStaticFilesOptions.cs b/src/Components/Server/src/DependencyInjection/ConfigureStaticFilesOptions.cs
index f7484626ce..4563f6ad07 100644
--- a/src/Components/Server/src/DependencyInjection/ConfigureStaticFilesOptions.cs
+++ b/src/Components/Server/src/DependencyInjection/ConfigureStaticFilesOptions.cs
@@ -58,7 +58,7 @@ namespace Microsoft.AspNetCore.Components.Server
             }
 
             // Add our provider
-            var provider = new ManifestEmbeddedFileProvider(typeof(ConfigureStaticFilesOptions).Assembly);
+            var provider = new Microsoft.Extensions.FileProviders.ManifestEmbeddedFileProvider(typeof(ConfigureStaticFilesOptions).Assembly);
 
             options.FileProvider = new CompositeFileProvider(provider, options.FileProvider);
         }
diff --git a/src/Components/Server/src/Microsoft.AspNetCore.Components.Server.csproj b/src/Components/Server/src/Microsoft.AspNetCore.Components.Server.csproj
index fb56748e6e..97a4aa0827 100644
--- a/src/Components/Server/src/Microsoft.AspNetCore.Components.Server.csproj
+++ b/src/Components/Server/src/Microsoft.AspNetCore.Components.Server.csproj
@@ -19,7 +19,7 @@
     <Reference Include="Microsoft.AspNetCore.StaticFiles" />
     <Reference Include="Microsoft.Extensions.Caching.Memory" />
     <Reference Include="Microsoft.Extensions.FileProviders.Composite" />
-    <Reference Include="Microsoft.Extensions.FileProviders.Embedded" />
+    <Reference Include="Microsoft.Extensions.FileProviders.Embedded" /> <! -- no-op -->
     <Reference Include="Microsoft.Extensions.Logging" />
     <Reference Include="Microsoft.Extensions.ValueStopwatch.Sources" PrivateAssets="All" />
 
-- 
2.23.0

