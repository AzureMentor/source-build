From 05fa8d2075171e94788e5887490d7f6b63906d45 Mon Sep 17 00:00:00 2001
From: dseefeld <dseefeld@microsoft.com>
Date: Fri, 23 Aug 2019 19:03:39 +0000
Subject: [PATCH 8/8] Remove prebuilts for source build

---
 eng/Tools.props         | 4 +++-
 eng/Workarounds.targets | 1 +
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/eng/Tools.props b/eng/Tools.props
index 46285b1448..cdfb67026c 100644
--- a/eng/Tools.props
+++ b/eng/Tools.props
@@ -6,7 +6,9 @@
       Without this here, we see regular failures with 'error MSB4236: The SDK 'Yarn.MSBuild' specified could not be found.'
       Since this project is evaluated before .npmproj files are loaded, this should cause the package to end
       up in the NuGet cache ahead of time.
+
+      This is not needed in source build.
     -->
-    <PackageReference Include="Yarn.MSBuild" Version="1.15.2" />
+    <PackageReference Condition="'$(DotNetBuildFromSource)' != 'true'" Include="Yarn.MSBuild" Version="1.15.2" />
   </ItemGroup>
 </Project>
diff --git a/eng/Workarounds.targets b/eng/Workarounds.targets
index f5c74cdd43..c3ee1b689a 100644
--- a/eng/Workarounds.targets
+++ b/eng/Workarounds.targets
@@ -27,6 +27,7 @@
 
   <!-- Workaround for https://github.com/dotnet/arcade/issues/204 -->
   <ItemGroup>
+  <ItemGroup Condition="'$(DotNetBuildFromSource)' != 'true'">
     <PackageReference Include="Internal.AspNetCore.BuildTasks" PrivateAssets="All" Version="$(InternalAspNetCoreBuildTasksPackageVersion)" IsImplicitlyDefined="true" />
   </ItemGroup>
 
-- 
2.18.0

